
    packageDetails: {
        included: [
            'ì™•ë³µ í•­ê³µê¶Œ (ì¸ì²œ-ìƒíŒŒìš¸ë£¨-ë¦¬ìš°, ì´ì½”ë…¸ë¯¸ì„)',
            '4ì„±ê¸‰ í˜¸í…” 6ë°• (ì¡°ì‹ í¬í•¨)',
            'ì¹´ë‹ˆë°œ í¼ë ˆì´ë“œ ì§€ì •ì„ ì…ì¥ê¶Œ',
            'ì‚¼ë°”ë“œë¡¬ VIP êµ¬ì—­ 2ì¼ê¶Œ',
            'ì½”ë¥´ì½”ë°”ë„ ì˜ˆìˆ˜ìƒ íˆ¬ì–´',
            'ìŠˆê°€ë¡œí”„ ë§ˆìš´í‹´ ì¼€ì´ë¸”ì¹´',
            'ì´íŒŒë„¤ë§ˆ ë¹„ì¹˜ ì„ ì…‹ í¬ë£¨ì¦ˆ',
            'ì—¬í–‰ì ë³´í—˜',
            'í•œêµ­ì¸ ê°€ì´ë“œ'
        ],
        excluded: [
            'ê°œì¸ ê²½ë¹„ ë° ì‡¼í•‘ ë¹„ìš©',
            'ì„ íƒ ê´€ê´‘ í”„ë¡œê·¸ë¨',
            'ì¶”ê°€ ì‹ì‚¬ ë° ìŒë£Œ',
            'ì¹´ë‹ˆë°œ ì˜ìƒ ëŒ€ì—¬',
            'í˜¸í…” ë¯¸ë‹ˆë°”',
            'ì—¬ê¶Œ ë° ë¹„ì ë°œê¸‰ ë¹„ìš©'
        ],
        productCode: 'FEST-BR-003',
        departureDates: [
            '2026ë…„ 2ì›” 12ì¼ (ëª©)',
            '2026ë…„ 2ì›” 14ì¼ (í† )',
            '2026ë…„ 2ì›” 16ì¼ (ì›”)'
        ],
        groupDiscount: {
            '4-6ëª…': '1ì¸ë‹¹ 70,000ì› í• ì¸',
            '7-9ëª…': '1ì¸ë‹¹ 100,000ì› í• ì¸',
            '10ëª… ì´ìƒ': '1ì¸ë‹¹ 150,000ì› í• ì¸'
        }
    },
    packageDetails: {
        included: [
            'ì™•ë³µ í•­ê³µê¶Œ (ì¸ì²œ-ë®Œí—¨, ì´ì½”ë…¸ë¯¸ì„)',
            '5ì„±ê¸‰ í˜¸í…” 5ë°• (ì¡°ì‹ í¬í•¨)',
            'ì˜¥í† ë²„í˜ìŠ¤íŠ¸ ì…ì¥ê¶Œ 2íšŒ',
            'ë§¥ì£¼ í…íŠ¸ ì˜ˆì•½ì„ & ë§¥ì£¼ 2ë¦¬í„° ì¿ í°',
            'ë®Œí—¨ ì‹œë‚´ ê°€ì´ë“œ íˆ¬ì–´',
            'ë…¸ì´ìŠˆë°˜ìŠˆíƒ€ì¸ ì„± ë‹¹ì¼ íˆ¬ì–´',
            'ì—¬í–‰ì ë³´í—˜',
            'í•œêµ­ì¸ ê°€ì´ë“œ'
        ],
        excluded: [
            'ê°œì¸ ê²½ë¹„ ë° ì‡¼í•‘ ë¹„ìš©',
            'ì„ íƒ ê´€ê´‘ í”„ë¡œê·¸ë¨',
            'ì¶”ê°€ ë§¥ì£¼ ë° ì‹ì‚¬',
            'í˜¸í…” ë¯¸ë‹ˆë°” ë° ë£¸ì„œë¹„ìŠ¤',
            'ì—¬ê¶Œ ë°œê¸‰ ë¹„ìš©'
        ],
        productCode: 'FEST-DE-002',
        departureDates: [
            '2025ë…„ 9ì›” 18ì¼ (ëª©)',
            '2025ë…„ 9ì›” 25ì¼ (ëª©)',
            '2025ë…„ 10ì›” 2ì¼ (ëª©)'
        ],
        groupDiscount: {
            '4-6ëª…': '1ì¸ë‹¹ 50,000ì› í• ì¸',
            '7-9ëª…': '1ì¸ë‹¹ 80,000ì› í• ì¸',
            '10ëª… ì´ìƒ': '1ì¸ë‹¹ 100,000ì› í• ì¸'
        }
    },// ===== ì¶•ì œ ë°ì´í„° ì •ì˜ =====
const festivalsData = {
    tomatina: {
        id: 'tomatina',
        name: 'La Tomatina',
        nameKo: 'ë¼ í† ë§ˆí‹°ë‚˜',
        location: 'ë¶€ë‡°, ìŠ¤í˜ì¸',
        country: 'Spain',
        period: 'ë§¤ë…„ 8ì›” ë§ˆì§€ë§‰ ìˆ˜ìš”ì¼',
        description: 'ì„¸ê³„ì—ì„œ ê°€ì¥ í° í† ë§ˆí†  ì¶•ì œë¡œ, ìˆ˜ì²œ ëª…ì˜ ì°¸ê°€ìë“¤ì´ ê±°ë¦¬ì—ì„œ í† ë§ˆí† ë¥¼ ë˜ì§€ë©° ì¦ê¸°ëŠ” ìŠ¤í˜ì¸ì˜ ëŒ€í‘œ ì¶•ì œì…ë‹ˆë‹¤.',
        targetAudience: 'ëŒ€í•™ìƒ, ì¹œêµ¬ ê·¸ë£¹, ëª¨í—˜ì„ ì¢‹ì•„í•˜ëŠ” ì²­ë…„ì¸µ',
        totalBudget: 2200000,
        imageKeyword: 'La Tomatina festival Spain',
        mapEmbed: 'https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d48795.89407596485!2d-0.7897598!3d39.4185064!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0xd604f11a8461515%3A0x402b1f4a30196e0!2sBu%C3%B1ol%2C%20Valencia%2C%20Spain!5e0!3m2!1sen!2skr!4v1635000000000!5m2!1sen!2skr',
        
        budget: {
            flight: { label: 'í•­ê³µê¶Œ (ì™•ë³µ)', amount: 1200000, icon: 'fa-plane' },
            accommodation: { label: 'ìˆ™ë°• (5ë°•)', amount: 400000, icon: 'fa-hotel' },
            food: { label: 'ì‹ë¹„', amount: 300000, icon: 'fa-utensils' },
            festival: { label: 'ì¶•ì œ ì…ì¥ë£Œ', amount: 50000, icon: 'fa-ticket-alt' },
            transportation: { label: 'í˜„ì§€ êµí†µ', amount: 150000, icon: 'fa-bus' },
            misc: { label: 'ê¸°íƒ€ ê²½ë¹„', amount: 100000, icon: 'fa-shopping-bag' }
        },
        
        attractions: [
            {
                name: 'ë¶€ë‡° ì„± (Castillo de BuÃ±ol)',
                location: 'ë¶€ë‡° ì‹œë‚´',
                description: '11ì„¸ê¸°ì— ì§€ì–´ì§„ ì¤‘ì„¸ ì„±ê³½ìœ¼ë¡œ, í† ë§ˆí‹°ë‚˜ ì¶•ì œì˜ ì—­ì‚¬ì  ë°°ê²½ì´ ë˜ëŠ” ì¥ì†Œì…ë‹ˆë‹¤. ì„±ë²½ì—ì„œ ë°”ë¼ë³´ëŠ” ë¶€ë‡° ë§ˆì„ ì „ê²½ì´ ì•„ë¦„ë‹µìŠµë‹ˆë‹¤.',
                course: '1ì¼ì°¨',
                imageKeyword: 'Bunol Castle Spain'
            },
            {
                name: 'ë°œë Œì‹œì•„ êµ¬ì‹œê°€ì§€',
                location: 'ë°œë Œì‹œì•„',
                description: 'ë¶€ë‡°ì—ì„œ ì•½ 40km ë–¨ì–´ì§„ ë°œë Œì‹œì•„ëŠ” íŒŒì—ì•¼ì˜ ë³¸ê³ ì¥ì…ë‹ˆë‹¤. ì¤‘ì•™ì‹œì¥, ëŒ€ì„±ë‹¹, ì‹¤í¬ê±°ë˜ì†Œ ë“± ë³¼ê±°ë¦¬ê°€ í’ë¶€í•©ë‹ˆë‹¤.',
                course: '2ì¼ì°¨',
                imageKeyword: 'Valencia old town Spain'
            },
            {
                name: 'ì˜ˆìˆ ê³¼í•™ì˜ ë„ì‹œ',
                location: 'ë°œë Œì‹œì•„',
                description: 'ì‚°í‹°ì•„ê³  ì¹¼ë¼íŠ¸ë¼ë°”ê°€ ì„¤ê³„í•œ ë¯¸ë˜ì§€í–¥ì  ê±´ì¶•ë¬¼ ë‹¨ì§€ë¡œ, ê³¼í•™ë°•ë¬¼ê´€, ìˆ˜ì¡±ê´€, ì˜¤í˜ë¼í•˜ìš°ìŠ¤ ë“±ì´ ìˆìŠµë‹ˆë‹¤.',
                course: '3ì¼ì°¨',
                imageKeyword: 'City of Arts and Sciences Valencia'
            },
            {
                name: 'ë§ë°”ë¡œì‚¬ í•´ë³€',
                location: 'ë°œë Œì‹œì•„',
                description: 'ë°œë Œì‹œì•„ì˜ ì•„ë¦„ë‹¤ìš´ ì§€ì¤‘í•´ í•´ë³€ìœ¼ë¡œ, ì¶•ì œ í›„ íœ´ì‹ì„ ì·¨í•˜ê¸°ì— ì™„ë²½í•œ ì¥ì†Œì…ë‹ˆë‹¤. í•´ë³€ ë ˆìŠ¤í† ë‘ì—ì„œ ì‹ ì„ í•œ í•´ì‚°ë¬¼ì„ ì¦ê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
                course: '4ì¼ì°¨',
                imageKeyword: 'Malvarrosa beach Valencia'
            }
        ],
        
        tips: [
            'ì˜¤ë˜ëœ ì˜·ê³¼ ì‹ ë°œì„ ì¤€ë¹„í•˜ì„¸ìš”. í† ë§ˆí†  ì–¼ë£©ì€ ì˜ ì§€ì›Œì§€ì§€ ì•ŠìŠµë‹ˆë‹¤.',
            'ê³ ê¸€ì´ë‚˜ ìˆ˜ê²½ì„ ì°©ìš©í•˜ë©´ ëˆˆì„ ë³´í˜¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
            'ë°©ìˆ˜ ì¼€ì´ìŠ¤ì— ê·€ì¤‘í’ˆì„ ë³´ê´€í•˜ì„¸ìš”.',
            'ì¶•ì œëŠ” 1ì‹œê°„ ì •ë„ ì§„í–‰ë˜ë©°, ì˜¤ì „ 11ì‹œì— ì‹œì‘í•©ë‹ˆë‹¤.',
            'ì¶•ì œ ì „ë‚  ë¶€ë‡°ì— ë„ì°©í•˜ëŠ” ê²ƒì„ ì¶”ì²œí•©ë‹ˆë‹¤.',
            'ì—¬ë²Œ ì˜·ì„ ê°€ì ¸ê°€ì„œ ì¶•ì œ í›„ ê°ˆì•„ì…ìœ¼ì„¸ìš”.'
        ],
        
        preparation: [
            'í—Œ ì˜·ê³¼ ìš´ë™í™” (ë²„ë ¤ë„ ë˜ëŠ” ê²ƒ)',
            'ê³ ê¸€ ë˜ëŠ” ìˆ˜ê²½',
            'ë°©ìˆ˜ ê°€ë°© ë° íœ´ëŒ€í° ë°©ìˆ˜ ì¼€ì´ìŠ¤',
            'ìˆ˜ê±´ê³¼ ì—¬ë²Œ ì˜·',
            'ìì™¸ì„  ì°¨ë‹¨ì œ',
            'ëª¨ì (ë²„ë¦´ ìˆ˜ ìˆëŠ” ê²ƒ)'
        ]
    },
    
    oktoberfest: {
        id: 'oktoberfest',
        name: 'Oktoberfest',
        nameKo: 'ì˜¥í† ë²„í˜ìŠ¤íŠ¸',
        location: 'ë®Œí—¨, ë…ì¼',
        country: 'Germany',
        period: '9ì›” ì¤‘ìˆœ ~ 10ì›” ì´ˆ (ì•½ 16ì¼ê°„)',
        description: 'ì„¸ê³„ ìµœëŒ€ ê·œëª¨ì˜ ë§¥ì£¼ ì¶•ì œë¡œ, ë§¤ë…„ 600ë§Œ ëª… ì´ìƒì´ ë°©ë¬¸í•©ë‹ˆë‹¤. ì „í†µ ë°”ì´ì—ë¥¸ ë¬¸í™”ì™€ í•¨ê»˜ ìµœê³ ì˜ ë§¥ì£¼ë¥¼ ì¦ê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
        targetAudience: 'ì§ì¥ì¸, ë¬¸í™” ì• í˜¸ê°€, ë§¥ì£¼ ì• í˜¸ê°€',
        totalBudget: 2800000,
        imageKeyword: 'Oktoberfest Munich Germany',
        mapEmbed: 'https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d42525.72825568896!2d11.5191866!3d48.1317432!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x479e75f9a38c5fd9%3A0x10cb84a7db1987d!2sTheresienwiese%2C%20Munich%2C%20Germany!5e0!3m2!1sen!2skr!4v1635000000000!5m2!1sen!2skr',
        
        budget: {
            flight: { label: 'í•­ê³µê¶Œ (ì™•ë³µ)', amount: 1400000, icon: 'fa-plane' },
            accommodation: { label: 'ìˆ™ë°• (6ë°•)', amount: 600000, icon: 'fa-hotel' },
            food: { label: 'ì‹ë¹„', amount: 400000, icon: 'fa-utensils' },
            festival: { label: 'ë§¥ì£¼ & ìŒì‹', amount: 250000, icon: 'fa-beer' },
            transportation: { label: 'í˜„ì§€ êµí†µ', amount: 100000, icon: 'fa-train' },
            misc: { label: 'ê¸°íƒ€ ê²½ë¹„', amount: 50000, icon: 'fa-shopping-bag' }
        },
        
        attractions: [
            {
                name: 'í…Œë ˆì§€ì—”ë¹„ì œ (ì¶•ì œì¥)',
                location: 'ë®Œí—¨ ì‹œë‚´',
                description: 'ì˜¥í† ë²„í˜ìŠ¤íŠ¸ê°€ ì—´ë¦¬ëŠ” ê´‘ëŒ€í•œ ì¶•ì œì¥ìœ¼ë¡œ, 14ê°œì˜ ëŒ€í˜• ë§¥ì£¼ í…íŠ¸ì™€ ë‹¤ì–‘í•œ ë†€ì´ê¸°êµ¬, ì „í†µ ìŒì‹ ë¶€ìŠ¤ê°€ ìˆìŠµë‹ˆë‹¤.',
                course: '1-3ì¼ì°¨',
                imageKeyword: 'Theresienwiese Oktoberfest Munich'
            },
            {
                name: 'ë§ˆë¦¬ì—” ê´‘ì¥',
                location: 'ë®Œí—¨ êµ¬ì‹œê°€ì§€',
                description: 'ë®Œí—¨ì˜ ì¤‘ì‹¬ ê´‘ì¥ìœ¼ë¡œ, ì‹ ì‹œì²­ì‚¬ì˜ ê¸€ë¡œì¼„ìŠˆí•„(ìë™ ì¸í˜•ì‹œê³„)ì´ ìœ ëª…í•©ë‹ˆë‹¤. ì£¼ë³€ì— ì‡¼í•‘ê°€ì™€ ë ˆìŠ¤í† ë‘ì´ ë°€ì§‘í•´ ìˆìŠµë‹ˆë‹¤.',
                course: '4ì¼ì°¨',
                imageKeyword: 'Marienplatz Munich'
            },
            {
                name: 'ë…¸ì´ìŠˆë°˜ìŠˆíƒ€ì¸ ì„±',
                location: 'í“Œì„¼ (ë®Œí—¨ì—ì„œ 2ì‹œê°„)',
                description: 'ë””ì¦ˆë‹ˆ ì„±ì˜ ëª¨ë¸ì´ ëœ ë™í™” ê°™ì€ ì„±ìœ¼ë¡œ, ë…ì¼ì—ì„œ ê°€ì¥ ì¸ê¸° ìˆëŠ” ê´€ê´‘ì§€ì…ë‹ˆë‹¤. ì•Œí”„ìŠ¤ ì‚°ë§¥ì„ ë°°ê²½ìœ¼ë¡œ í•œ ì ˆê²½ì´ ì••ê¶Œì…ë‹ˆë‹¤.',
                course: '5ì¼ì°¨',
                imageKeyword: 'Neuschwanstein Castle Germany'
            },
            {
                name: 'BMW ë°•ë¬¼ê´€ & ì˜¬ë¦¼í”½ ê³µì›',
                location: 'ë®Œí—¨ ë¶ë¶€',
                description: 'BMWì˜ ì—­ì‚¬ì™€ í˜ì‹ ì„ ì²´í—˜í•  ìˆ˜ ìˆëŠ” ë°•ë¬¼ê´€ê³¼ 1972ë…„ ì˜¬ë¦¼í”½ì´ ì—´ë ¸ë˜ í˜„ëŒ€ì ì¸ ê³µì›ì…ë‹ˆë‹¤.',
                course: '6ì¼ì°¨',
                imageKeyword: 'BMW Museum Munich'
            }
        ],
        
        tips: [
            'ì£¼ë§ê³¼ ì €ë… ì‹œê°„ì—ëŠ” í…íŠ¸ê°€ ë§¤ìš° í˜¼ì¡í•˜ë‹ˆ í‰ì¼ ì˜¤ì „ ë°©ë¬¸ì„ ì¶”ì²œí•©ë‹ˆë‹¤.',
            'ì „í†µ ì˜ìƒ(ë””ë¥¸ë“¤, ë ˆë”í˜¸ì  )ì„ ì…ìœ¼ë©´ ë”ìš± ë¶„ìœ„ê¸°ë¥¼ ì¦ê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
            '1 Mass(ë§¥ì£¼ 1ë¦¬í„°)ëŠ” ì•½ 13-15ìœ ë¡œì´ë©°, ìŒì‹ì€ 10-20ìœ ë¡œ ì •ë„ì…ë‹ˆë‹¤.',
            'í…íŠ¸ ë‚´ í…Œì´ë¸” ì˜ˆì•½ì€ í•„ìˆ˜ì´ë©°, í˜¸í…”ì€ ìµœì†Œ 6ê°œì›” ì „ ì˜ˆì•½ì´ í•„ìš”í•©ë‹ˆë‹¤.',
            'ëŒ€ì¤‘êµí†µ(U-Bahn, S-Bahn)ì„ ì´ìš©í•˜ë©´ í¸ë¦¬í•©ë‹ˆë‹¤.',
            'ì•ˆì „ì„ ìœ„í•´ ê·€ì¤‘í’ˆì„ ì¡°ì‹¬í•˜ê³ , ê³¼ìŒí•˜ì§€ ì•Šë„ë¡ ì£¼ì˜í•˜ì„¸ìš”.'
        ],
        
        preparation: [
            'í¸ì•ˆí•œ ì‹ ë°œ (ì˜¤ë˜ ê±·ê²Œ ë©ë‹ˆë‹¤)',
            'ì „í†µ ì˜ìƒ (ì„ íƒì‚¬í•­, í˜„ì§€ êµ¬ë§¤ ê°€ëŠ¥)',
            'ì¹´ë©”ë¼ (ë©‹ì§„ ì‚¬ì§„ ì´¬ì˜)',
            'í˜„ê¸ˆ (ì¼ë¶€ í…íŠ¸ëŠ” ì¹´ë“œ ë¶ˆê°€)',
            'ê°€ë²¼ìš´ ì¬í‚· (ë°¤ì—ëŠ” ìŒ€ìŒ€)',
            'ìˆ™ì·¨ í•´ì†Œì œ'
        ]
    },
    
    carnival: {
        id: 'carnival',
        name: 'Rio Carnival',
        nameKo: 'ë¦¬ìš° ì¹´ë‹ˆë°œ',
        location: 'ë¦¬ìš°ë°ìë„¤ì´ë£¨, ë¸Œë¼ì§ˆ',
        country: 'Brazil',
        period: '2ì›” ë§ ~ 3ì›” ì´ˆ (ì¬ì˜ ìˆ˜ìš”ì¼ ì „ 5ì¼ê°„)',
        description: 'ì„¸ê³„ì—ì„œ ê°€ì¥ í™”ë ¤í•˜ê³  ì—´ì •ì ì¸ ì¶•ì œë¡œ, ì‚¼ë°” í¼ë ˆì´ë“œì™€ ê±°ë¦¬ íŒŒí‹°ê°€ ë„ì‹œ ì „ì²´ë¥¼ ëœ¨ê²ê²Œ ë‹¬êµ½ë‹ˆë‹¤.',
        targetAudience: 'ìŒì•…/ì¶¤ ì• í˜¸ê°€, ì¶•ì œ ë§ˆë‹ˆì•„, í™œë™ì ì¸ ì—¬í–‰ê°',
        totalBudget: 3500000,
        imageKeyword: 'Rio Carnival Brazil',
        mapEmbed: 'https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d117505.38165523665!2d-43.2093736!3d-22.9068467!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x9bde559108a05b%3A0x50dc426c672fd24e!2sSambadrome%20MarquÃªs%20de%20SapucaÃ­!5e0!3m2!1sen!2skr!4v1635000000000!5m2!1sen!2skr',
        
        budget: {
            flight: { label: 'í•­ê³µê¶Œ (ì™•ë³µ)', amount: 1800000, icon: 'fa-plane' },
            accommodation: { label: 'ìˆ™ë°• (7ë°•)', amount: 800000, icon: 'fa-hotel' },
            food: { label: 'ì‹ë¹„', amount: 450000, icon: 'fa-utensils' },
            festival: { label: 'ì¹´ë‹ˆë°œ í‹°ì¼“', amount: 300000, icon: 'fa-ticket-alt' },
            transportation: { label: 'í˜„ì§€ êµí†µ', amount: 100000, icon: 'fa-taxi' },
            misc: { label: 'ê¸°íƒ€ ê²½ë¹„', amount: 50000, icon: 'fa-shopping-bag' }
        },
        
        attractions: [
            {
                name: 'ì‚¼ë³´ë“œë¡œëª¨',
                location: 'ì„¼íŠ¸ë¡œ',
                description: 'ì¹´ë‹ˆë°œ ì‚¼ë°” í¼ë ˆì´ë“œê°€ ì—´ë¦¬ëŠ” ê±°ëŒ€í•œ ê²½ê¸°ì¥ìœ¼ë¡œ, 12ê°œ ì‚¼ë°” ìŠ¤ì¿¨ì˜ í™”ë ¤í•œ ê³µì—°ì„ ê°ìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë°¤ìƒˆ ì§„í–‰ë˜ëŠ” í¼ë ˆì´ë“œëŠ” ì••ë„ì ì¸ ìŠ¤í™í„°í´ì„ ì„ ì‚¬í•©ë‹ˆë‹¤.',
                course: '1-2ì¼ì°¨',
                imageKeyword: 'Sambadrome Rio de Janeiro'
            },
            {
                name: 'ì½”íŒŒì¹´ë°”ë‚˜ í•´ë³€',
                location: 'ì½”íŒŒì¹´ë°”ë‚˜',
                description: 'ì„¸ê³„ì—ì„œ ê°€ì¥ ìœ ëª…í•œ í•´ë³€ ì¤‘ í•˜ë‚˜ë¡œ, ì¹´ë‹ˆë°œ ê¸°ê°„ì—ëŠ” ê±°ë¦¬ íŒŒí‹°(ë¸”ë¡œì½”)ê°€ ì—´ë¦½ë‹ˆë‹¤. 4kmì˜ ë°±ì‚¬ì¥ê³¼ í™œê¸°ì°¬ ë¶„ìœ„ê¸°ë¥¼ ì¦ê¸°ì„¸ìš”.',
                course: '3ì¼ì°¨',
                imageKeyword: 'Copacabana beach Rio'
            },
            {
                name: 'ì½”ë¥´ì½”ë°”ë„ ì˜ˆìˆ˜ìƒ',
                location: 'ì½”ë¥´ì½”ë°”ë„ ì‚°',
                description: 'ë¦¬ìš°ì˜ ìƒì§•ì¸ 38m ë†’ì´ì˜ ê±°ëŒ€í•œ ì˜ˆìˆ˜ìƒì´ ìˆëŠ” ê³³ìœ¼ë¡œ, ë¦¬ìš° ì „ê²½ì„ í•œëˆˆì— ë³¼ ìˆ˜ ìˆëŠ” ìµœê³ ì˜ ì „ë§ëŒ€ì…ë‹ˆë‹¤.',
                course: '4ì¼ì°¨',
                imageKeyword: 'Christ the Redeemer Rio'
            },
            {
                name: 'ìŠˆê°€ë¡œí”„ ì‚°',
                location: 'ìš°ë¥´ì¹´',
                description: 'ì¼€ì´ë¸”ì¹´ë¥¼ íƒ€ê³  ì˜¬ë¼ê°€ëŠ” 396m ë†’ì´ì˜ í™”ê°•ì•” ë´‰ìš°ë¦¬ë¡œ, ë¦¬ìš°ì˜ ì•„ë¦„ë‹¤ìš´ ë§Œê³¼ í•´ë³€ì„ ì¡°ë§í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì¼ëª° ì‹œê°„ëŒ€ê°€ íŠ¹íˆ ì¸ê¸°ì…ë‹ˆë‹¤.',
                course: '5ì¼ì°¨',
                imageKeyword: 'Sugarloaf Mountain Rio'
            },
            {
                name: 'ì…€ë¼ë¡  ê³„ë‹¨',
                location: 'ë¼íŒŒ',
                description: 'ì¹ ë ˆ ì˜ˆìˆ ê°€ í˜¸ë¥´í—¤ ì…€ë¼ë¡ ì´ ë§Œë“  215ê°œì˜ ê³„ë‹¨ìœ¼ë¡œ, ì„¸ê³„ ê°êµ­ì—ì„œ ê°€ì ¸ì˜¨ íƒ€ì¼ë¡œ ì¥ì‹ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ì‚¬ì§„ ì´¬ì˜ ëª…ì†Œë¡œ ìœ ëª…í•©ë‹ˆë‹¤.',
                course: '6ì¼ì°¨',
                imageKeyword: 'Selaron Steps Rio'
            },
            {
                name: 'ì´íŒŒë„¤ë§ˆ í•´ë³€',
                location: 'ì´íŒŒë„¤ë§ˆ',
                description: 'ë³´ì‚¬ë…¸ë°”ì˜ ëª…ê³¡ "ì´íŒŒë„¤ë§ˆì—ì„œ ì˜¨ ì†Œë…€"ë¡œ ìœ ëª…í•œ ì„¸ë ¨ëœ í•´ë³€ìœ¼ë¡œ, ì½”íŒŒì¹´ë°”ë‚˜ë³´ë‹¤ ì¡°ìš©í•˜ê³  ê³ ê¸‰ìŠ¤ëŸ¬ìš´ ë¶„ìœ„ê¸°ì…ë‹ˆë‹¤.',
                course: '7ì¼ì°¨',
                imageKeyword: 'Ipanema beach Rio'
            }
        ],
        
        tips: [
            'ì‚¼ë³´ë“œë¡œëª¨ í‹°ì¼“ì€ ìµœì†Œ 3-4ê°œì›” ì „ ì˜ˆì•½ì´ í•„ìˆ˜ì…ë‹ˆë‹¤.',
            'í˜¸í…” ê°€ê²©ì´ í‰ì†Œì˜ 3-5ë°°ë¡œ ì˜¤ë¥´ë‹ˆ ì¡°ê¸° ì˜ˆì•½í•˜ì„¸ìš”.',
            'ê±°ë¦¬ íŒŒí‹°(ë¸”ë¡œì½”)ëŠ” ë¬´ë£Œì´ë©°, ë” ììœ ë¡œìš´ ë¶„ìœ„ê¸°ë¥¼ ì¦ê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
            'ì†Œë§¤ì¹˜ê¸°ê°€ ë§ìœ¼ë‹ˆ ê·€ì¤‘í’ˆì€ í˜¸í…”ì— ë‘ê³ , ìµœì†Œí•œë§Œ ì§€ì°¸í•˜ì„¸ìš”.',
            'ë”ìš´ ë‚ ì”¨ì´ë¯€ë¡œ ìˆ˜ë¶„ ì„­ì·¨ì™€ ìì™¸ì„  ì°¨ë‹¨ì— ì‹ ê²½ ì“°ì„¸ìš”.',
            'í¬ë¥´íˆ¬ê°ˆì–´ ê¸°ë³¸ íšŒí™”ë¥¼ ìµí˜€ë‘ë©´ ë„ì›€ì´ ë©ë‹ˆë‹¤.',
            'ë°¤ëŠ¦ê²Œ í˜¼ì ë‹¤ë‹ˆì§€ ë§ê³ , íƒì‹œëŠ” ê³µì‹ íƒì‹œë§Œ ì´ìš©í•˜ì„¸ìš”.'
        ],
        
        preparation: [
            'ê°€ë²¼ìš´ ì—¬ë¦„ ì˜· (ë°˜íŒ”, ë°˜ë°”ì§€, ìˆ˜ì˜ë³µ)',
            'í¸ì•ˆí•œ ìƒŒë“¤ê³¼ ìš´ë™í™”',
            'ì¹´ë‹ˆë°œ ì˜ìƒ (ì„ íƒì‚¬í•­, í˜„ì§€ êµ¬ë§¤ ê°€ëŠ¥)',
            'ë†’ì€ SPF ìì™¸ì„  ì°¨ë‹¨ì œ',
            'ëª¨ìì™€ ì„ ê¸€ë¼ìŠ¤',
            'ë°©ìˆ˜ ê°€ë°© ë° íœ´ëŒ€í° ë°©ìˆ˜ ì¼€ì´ìŠ¤',
            'ë¹„ìƒ ì•½í’ˆ (ì„¤ì‚¬ì•½, í•´ì—´ì œ ë“±)',
            'í˜„ê¸ˆ (ê±°ë¦¬ì—ì„œëŠ” ì¹´ë“œ ì‚¬ìš© ì–´ë ¤ì›€)'
        ]
    }
};


// ===== ìƒí’ˆ ê°œë°œ ë°°ê²½ ë° ì‹œì¥ ë¶„ì„ ë°ì´í„° =====
const marketAnalysis = {
    developmentReason: {
        title: 'í•´ì™¸ ì¶•ì œ ê´€ê´‘ìƒí’ˆ ê°œë°œ ì´ìœ ',
        trends: [
            {
                icon: 'fa-chart-line',
                title: 'ì²´í—˜í˜• ê´€ê´‘ ìˆ˜ìš” ì¦ê°€',
                description: 'MZì„¸ëŒ€ë¥¼ ì¤‘ì‹¬ìœ¼ë¡œ SNS ì¸ì¦ìƒ·, íŠ¹ë³„í•œ ê²½í—˜ì„ ì¤‘ì‹œí•˜ëŠ” ì²´í—˜í˜• ê´€ê´‘ ìˆ˜ìš”ê°€ ì—°í‰ê·  25% ì¦ê°€'
            },
            {
                icon: 'fa-users',
                title: 'íƒ€ê²Ÿì¸µ ëª…í™•í•œ ë‹ˆì¹˜ ì‹œì¥',
                description: 'ì¶•ì œ ì¤‘ì‹¬ íŒ¨í‚¤ì§€ëŠ” 20-40ëŒ€ ì Šì€ì¸µì˜ êµ¬ë§¤ë ¥ê³¼ ì—¬í–‰ ì„ í˜¸ë„ê°€ ë†’ì•„ íš¨ê³¼ì ì¸ ë§ˆì¼€íŒ… ê°€ëŠ¥'
            },
            {
                icon: 'fa-globe',
                title: 'ì°¨ë³„í™”ëœ ìƒí’ˆ ê²½ìŸë ¥',
                description: 'ì¼ë°˜ ìœ ëŸ½/ë‚¨ë¯¸ íŒ¨í‚¤ì§€ì™€ ë‹¬ë¦¬ ì¶•ì œ ì‹œì¦Œì— ë§ì¶˜ í…Œë§ˆ ìƒí’ˆìœ¼ë¡œ ë†’ì€ í”„ë¦¬ë¯¸ì—„ ê°€ê²© ì±…ì • ê°€ëŠ¥'
            },
            {
                icon: 'fa-calendar-check',
                title: 'ì‹œì¦Œì„±ì„ í™œìš©í•œ ìˆ˜ìµ ê·¹ëŒ€í™”',
                description: 'ì¶•ì œ íŠ¹ì • ê¸°ê°„ì— ì§‘ì¤‘ íŒë§¤ë¡œ ì„±ìˆ˜ê¸° ë§¤ì¶œ í™•ë³´ ë° ì—°ê°„ ë§¤ì¶œ ì•ˆì •í™”'
            }
        ],
        targetJustification: {
            primary: {
                segment: 'ëŒ€í•™ìƒ ë° ì§ì¥ ì´ˆë…„ìƒ (20-30ëŒ€)',
                reason: 'SNS í™œë™ í™œë°œ, ìƒˆë¡œìš´ ê²½í—˜ ì¶”êµ¬, ì¹œêµ¬ë“¤ê³¼ì˜ ì¶”ì–µ ë§Œë“¤ê¸° ì¤‘ì‹œ',
                marketSize: 'ì—°ê°„ ì•½ 50ë§Œëª… (í•´ì™¸ì—¬í–‰ ì‹œì¥ì˜ 15%)',
                averageSpend: '250ë§Œì›'
            },
            secondary: {
                segment: 'ì§ì¥ì¸ ë° ì‹ í˜¼ë¶€ë¶€ (30-40ëŒ€)',
                reason: 'ì—¬ìœ ë¡œìš´ ì†Œë“, í’ˆì§ˆ ì¤‘ì‹œ, ë¬¸í™”ì²´í—˜ ì„ í˜¸',
                marketSize: 'ì—°ê°„ ì•½ 30ë§Œëª…',
                averageSpend: '350ë§Œì›'
            }
        },
        competitiveAdvantage: [
            'ì¶•ì œ í˜„ì¥ ë¶„ìœ„ê¸°ì™€ ê´€ê´‘ì„ ë™ì‹œì— ì¦ê¸¸ ìˆ˜ ìˆëŠ” ë³µí•© ìƒí’ˆ',
            'ê° ì¶•ì œë³„ ìµœì í™”ëœ ì¼ì • ë° ìˆ™ì†Œ ë°°ì¹˜',
            'í˜„ì§€ ê°€ì´ë“œì™€ í•¨ê»˜í•˜ëŠ” ì•ˆì „í•˜ê³  í¸ë¦¬í•œ ì—¬í–‰',
            'ë‹¨ì²´ í• ì¸ì„ í†µí•œ ê°€ê²© ê²½ìŸë ¥'
        ]
    },
    
    profitability: {
        tomatina: {
            productCode: 'FEST-ES-001',
            productName: 'ì—´ì •ì˜ í† ë§ˆí†  ì¶•ì œ 5ì¼',
            costStructure: {
                airfare: 1100000,      // ì›ê°€
                accommodation: 350000,
                meals: 200000,
                admission: 40000,
                guide: 150000,
                insurance: 50000,
                margin: 310000         // ë§ˆì§„
            },
            sellingPrice: 2200000,
            costPrice: 1890000,
            marginRate: 14.1,          // ë§ˆì§„ìœ¨ %
            breakEvenUnits: 15,        // ì†ìµë¶„ê¸°ì  ì¸ì›
            expectedUnits: {
                monthly: 40,           // ì›” ì˜ˆìƒ ì¸ì› (8ì›” ì§‘ì¤‘)
                quarterly: 80,
                annual: 120
            },
            revenue: {
                monthly: 88000000,     // ì›” ì˜ˆìƒ ë§¤ì¶œ
                quarterly: 176000000,
                annual: 264000000
            },
            profit: {
                monthly: 12400000,     // ì›” ì˜ˆìƒ ìˆ˜ìµ
                quarterly: 24800000,
                annual: 37200000
            }
        },
        oktoberfest: {
            productCode: 'FEST-DE-002',
            productName: 'ë®Œí—¨ ë§¥ì£¼ ì¶•ì œ 6ì¼',
            costStructure: {
                airfare: 1300000,
                accommodation: 500000,
                meals: 280000,
                admission: 0,
                guide: 180000,
                insurance: 60000,
                margin: 480000
            },
            sellingPrice: 2800000,
            costPrice: 2320000,
            marginRate: 17.1,
            breakEvenUnits: 12,
            expectedUnits: {
                monthly: 60,
                quarterly: 120,
                annual: 180
            },
            revenue: {
                monthly: 168000000,
                quarterly: 336000000,
                annual: 504000000
            },
            profit: {
                monthly: 28800000,
                quarterly: 57600000,
                annual: 86400000
            }
        },
        carnival: {
            productCode: 'FEST-BR-003',
            productName: 'ë¦¬ìš° ì‚¼ë°” ì¹´ë‹ˆë°œ 7ì¼',
            costStructure: {
                airfare: 1650000,
                accommodation: 700000,
                meals: 350000,
                admission: 250000,
                guide: 200000,
                insurance: 70000,
                margin: 780000
            },
            sellingPrice: 3500000,
            costPrice: 3220000,
            marginRate: 22.3,
            breakEvenUnits: 10,
            expectedUnits: {
                monthly: 35,
                quarterly: 70,
                annual: 105
            },
            revenue: {
                monthly: 122500000,
                quarterly: 245000000,
                annual: 367500000
            },
            profit: {
                monthly: 27300000,
                quarterly: 54600000,
                annual: 81900000
            }
        },
        total: {
            annualRevenue: 1135500000,     // ì´ ì—°ê°„ ë§¤ì¶œ
            annualProfit: 205500000,        // ì´ ì—°ê°„ ìˆ˜ìµ
            averageMarginRate: 18.1,        // í‰ê·  ë§ˆì§„ìœ¨
            totalExpectedCustomers: 405     // ì´ ì˜ˆìƒ ê³ ê° ìˆ˜
        }
    },
    
    expectedEffects: {
        financial: {
            firstYearRevenue: 1135500000,
            firstYearProfit: 205500000,
            secondYearGrowth: 30,          // 2ë…„ì°¨ ì„±ì¥ë¥  %
            thirdYearGrowth: 50            // 3ë…„ì°¨ ëˆ„ì  ì„±ì¥ë¥  %
        },
        marketing: {
            brandAwareness: 'ì¶•ì œ ì „ë¬¸ ì—¬í–‰ì‚¬ ì´ë¯¸ì§€ êµ¬ì¶•',
            customerRetention: 'ì¬ë°©ë¬¸ìœ¨ 40% ì´ìƒ ëª©í‘œ',
            wordOfMouth: 'SNS ë°”ì´ëŸ´ ë§ˆì¼€íŒ… íš¨ê³¼',
            mediaExposure: 'ì—¬í–‰ ì „ë¬¸ ë§¤ì²´ ë° ë¸”ë¡œê±° í˜‘ì—…'
        },
        strategic: {
            portfolioDiversification: 'ê³„ì ˆë³„ ìƒí’ˆ ë¼ì¸ì—… í™•ëŒ€',
            b2bOpportunities: 'ëŒ€í•™êµ, ê¸°ì—… ë‹¨ì²´ ì—¬í–‰ ìˆ˜ì£¼',
            futureExpansion: 'ì•„ì‹œì•„ ì¶•ì œ(í™€ë¦¬, ì†¡í¬ë€ ë“±) í™•ì¥ ê³„íš',
            partnershipBuilding: 'í˜„ì§€ ì—¬í–‰ì‚¬ ë° í˜¸í…” ì¥ê¸° ê³„ì•½'
        }
    }
};


// ===== Unsplash API ì„¤ì • =====
// ì‹¤ì œ ì‚¬ìš© ì‹œì—ëŠ” ë³¸ì¸ì˜ Unsplash API Keyë¥¼ ë°œê¸‰ë°›ì•„ ì‚¬ìš©í•˜ì„¸ìš”
// https://unsplash.com/developers ì—ì„œ ë¬´ë£Œë¡œ ë°œê¸‰ ê°€ëŠ¥
const UNSPLASH_ACCESS_KEY = 'Id8OlS5V38OdwbDrUvNzBmnTao4U6dyPbOPyZwcNtAI';
const UNSPLASH_API_URL = 'https://api.unsplash.com/search/photos';

// ===== ì´ë¯¸ì§€ ìºì‹œ ì €ì¥ì†Œ =====
const imageCache = {};

// ===== Unsplash APIë¥¼ í†µí•œ ì´ë¯¸ì§€ ê²€ìƒ‰ =====
async function fetchImageFromUnsplash(keyword, size = 'regular') {
    // ìºì‹œ í™•ì¸
    if (imageCache[keyword]) {
        return imageCache[keyword];
    }
    
    try {
        // API Keyê°€ ì„¤ì •ë˜ì§€ ì•Šì€ ê²½ìš° í”Œë ˆì´ìŠ¤í™€ë” ì´ë¯¸ì§€ ì‚¬ìš©
        if (UNSPLASH_ACCESS_KEY === 'YOUR_UNSPLASH_ACCESS_KEY_HERE') {
            console.warn('Unsplash API Keyê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. í”Œë ˆì´ìŠ¤í™€ë” ì´ë¯¸ì§€ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.');
            return getPlaceholderImage(keyword);
        }
        
        const response = await fetch(
            `${UNSPLASH_API_URL}?query=${encodeURIComponent(keyword)}&per_page=1&orientation=landscape`,
            {
                headers: {
                    'Authorization': `Client-ID ${UNSPLASH_ACCESS_KEY}`
                }
            }
        );
        
        if (!response.ok) {
            throw new Error('ì´ë¯¸ì§€ë¥¼ ê°€ì ¸ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
        }
        
        const data = await response.json();
        
        if (data.results && data.results.length > 0) {
            const imageUrl = data.results[0].urls[size];
            imageCache[keyword] = imageUrl;
            return imageUrl;
        } else {
            return getPlaceholderImage(keyword);
        }
    } catch (error) {
        console.error('Unsplash API ì˜¤ë¥˜:', error);
        return getPlaceholderImage(keyword);
    }
}

// ===== í”Œë ˆì´ìŠ¤í™€ë” ì´ë¯¸ì§€ ìƒì„± (API í‚¤ê°€ ì—†ì„ ë•Œ ì‚¬ìš©) =====
function getPlaceholderImage(keyword) {
    // ê³ ì • ì´ë¯¸ì§€ URL ì‚¬ìš© (ë” ì•ˆì •ì )
    const imageMap = {
        'La Tomatina festival Spain': 'https://images.unsplash.com/photo-1533174072545-7a4b6ad7a6c3?w=1600&h=900&fit=crop',
        'Munich Oktoberfest Germany': 'https://images.unsplash.com/photo-1569025690938-a00729c9e1f9?w=1600&h=900&fit=crop',
        'Rio Carnival Brazil': 'https://images.unsplash.com/photo-1516450360452-9312f5e86fc7?w=1600&h=900&fit=crop',
        'Bunol Castle Spain': 'https://images.unsplash.com/photo-1543783207-ec64e4d95325?w=800&h=600&fit=crop',
        'Valencia old town Spain': 'https://images.unsplash.com/photo-1559827260-dc66d52bef19?w=800&h=600&fit=crop',
        'City of Arts and Sciences Valencia': 'https://images.unsplash.com/photo-1562883676-8c7feb83f09b?w=800&h=600&fit=crop',
        'Malvarrosa beach Valencia': 'https://images.unsplash.com/photo-1507525428034-b723cf961d3e?w=800&h=600&fit=crop',
        'Theresienwiese Oktoberfest Munich': 'https://images.unsplash.com/photo-1569025690938-a00729c9e1f9?w=800&h=600&fit=crop',
        'Marienplatz Munich': 'https://images.unsplash.com/photo-1595867818082-083862f3d630?w=800&h=600&fit=crop',
        'Neuschwanstein Castle Germany': 'https://images.unsplash.com/photo-1467269204594-9661b134dd2b?w=800&h=600&fit=crop',
        'BMW Museum Munich': 'https://images.unsplash.com/photo-1556195023-d5d7bf52a3f7?w=800&h=600&fit=crop',
        'Sambadrome Rio de Janeiro': 'https://images.unsplash.com/photo-1516450360452-9312f5e86fc7?w=800&h=600&fit=crop',
        'Copacabana beach Rio': 'https://images.unsplash.com/photo-1483729558449-99ef09a8c325?w=800&h=600&fit=crop',
        'Christ the Redeemer Rio': 'https://images.unsplash.com/photo-1483729558449-99ef09a8c325?w=800&h=600&fit=crop',
        'Sugarloaf Mountain Rio': 'https://images.unsplash.com/photo-1483729558449-99ef09a8c325?w=800&h=600&fit=crop',
        'Selaron Steps Rio': 'https://images.unsplash.com/photo-1516826957135-700dedea698c?w=800&h=600&fit=crop',
        'Ipanema beach Rio': 'https://images.unsplash.com/photo-1483729558449-99ef09a8c325?w=800&h=600&fit=crop'
    };
    
    return imageMap[keyword] || `https://images.unsplash.com/photo-1533174072545-7a4b6ad7a6c3?w=1600&h=900&fit=crop&q=80&${Math.random()}`;
}

// ===== í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™” =====
document.addEventListener('DOMContentLoaded', async function() {
    await loadFestivalCards();
    setupSmoothScroll();
    setupAnimations();
});

// ===== ì¶•ì œ ì¹´ë“œ ë¡œë“œ ë° ì´ë¯¸ì§€ ì‚½ì… =====
async function loadFestivalCards() {
    const container = document.getElementById('festivalCards');
    container.innerHTML = ''; // ì´ˆê¸°í™”
    
    // ìŠ¤ì¼ˆë ˆí†¤ ë¡œë”© í‘œì‹œ
    showSkeletonCards(container);
    
    // ê° ì¶•ì œ ë°ì´í„° ì²˜ë¦¬
    for (const [key, festival] of Object.entries(festivalsData)) {
        try {
            // ë©”ì¸ ì´ë¯¸ì§€ ê°€ì ¸ì˜¤ê¸°
            const mainImage = await fetchImageFromUnsplash(festival.imageKeyword);
            
            // ì¹´ë“œ ìƒì„±
            const card = createFestivalCard(festival, mainImage);
            container.appendChild(card);
        } catch (error) {
            console.error(`${festival.name} ì¹´ë“œ ìƒì„± ì˜¤ë¥˜:`, error);
        }
    }
    
    // ìŠ¤ì¼ˆë ˆí†¤ ì œê±°
    removeSkeletonCards(container);
}

// ===== ìŠ¤ì¼ˆë ˆí†¤ ì¹´ë“œ í‘œì‹œ =====
function showSkeletonCards(container) {
    for (let i = 0; i < 3; i++) {
        const skeleton = document.createElement('div');
        skeleton.className = 'col-lg-4 col-md-6 skeleton-card';
        skeleton.innerHTML = `
            <div class="festival-card">
                <div class="festival-card-image skeleton" style="height: 250px;"></div>
                <div class="festival-card-body">
                    <div class="skeleton" style="height: 30px; width: 80%; margin-bottom: 1rem;"></div>
                    <div class="skeleton" style="height: 20px; width: 60%; margin-bottom: 1rem;"></div>
                    <div class="skeleton" style="height: 60px; width: 100%;"></div>
                </div>
            </div>
        `;
        container.appendChild(skeleton);
    }
}

// ===== ìŠ¤ì¼ˆë ˆí†¤ ì¹´ë“œ ì œê±° =====
function removeSkeletonCards(container) {
    const skeletons = container.querySelectorAll('.skeleton-card');
    skeletons.forEach(skeleton => skeleton.remove());
}

// ===== ì¶•ì œ ì¹´ë“œ ìƒì„± =====
function createFestivalCard(festival, imageUrl) {
    const col = document.createElement('div');
    col.className = 'col-lg-4 col-md-6';
    
    col.innerHTML = `
        <div class="festival-card" onclick="showFestivalDetail('${festival.id}')">
            <div class="festival-card-image">
                <img src="${imageUrl}" alt="${festival.name}" loading="lazy">
                <div class="festival-card-badge">${festival.country}</div>
            </div>
            <div class="festival-card-body">
                <h3 class="festival-card-title">${festival.nameKo}</h3>
                <p class="festival-card-location">
                    <i class="fas fa-map-marker-alt"></i> ${festival.location}
                </p>
                <p class="festival-card-description">${festival.description}</p>
                <div class="festival-card-info">
                    <span class="festival-card-period">
                        <i class="fas fa-calendar-alt"></i> ${festival.period.split('~')[0].trim()}
                    </span>
                    <span class="festival-card-price">
                        â‚©${formatNumber(festival.totalBudget)}
                    </span>
                </div>
            </div>
        </div>
    `;
    
    return col;
}

// ===== ìˆ«ì í¬ë§·íŒ… (ì²œ ë‹¨ìœ„ ì½¤ë§ˆ) =====
function formatNumber(num) {
    return num.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
}

// ===== ì¶•ì œ ìƒì„¸ ì •ë³´ í‘œì‹œ =====
async function showFestivalDetail(festivalId) {
    const festival = festivalsData[festivalId];
    if (!festival) return;
    
    const detailSection = document.getElementById('festivalDetail');
    
    // ìƒì„¸ ì •ë³´ í‘œì‹œ
    detailSection.style.display = 'block';
    document.body.style.overflow = 'hidden'; // ìŠ¤í¬ë¡¤ ë°©ì§€
    
    // í—¤ë” ì´ë¯¸ì§€ ë¡œë“œ
    const headerImage = await fetchImageFromUnsplash(festival.imageKeyword, 'full');
    document.getElementById('detailHeaderImage').src = headerImage;
    
    // ê¸°ë³¸ ì •ë³´ ì±„ìš°ê¸°
    document.getElementById('detailTitle').textContent = festival.nameKo;
    document.getElementById('detailLocation').querySelector('span').textContent = festival.location;
    document.getElementById('detailPeriod').textContent = festival.period;
    document.getElementById('detailTarget').textContent = festival.targetAudience;
    document.getElementById('detailDescription').textContent = festival.description;
    
    // ì§€ë„ ë¡œë“œ
    document.getElementById('detailMap').innerHTML = `
        <iframe src="${festival.mapEmbed}" allowfullscreen="" loading="lazy"></iframe>
    `;
    
    // ê´€ê´‘ì§€ ë¡œë“œ
    await loadAttractions(festival);
    
    // ê²½ë¹„ ì •ë³´ ë¡œë“œ
    loadBudgetInfo(festival);
    
    // ì—¬í–‰ íŒ ë¡œë“œ
    loadTravelTips(festival);
    
    // ë§¨ ìœ„ë¡œ ìŠ¤í¬ë¡¤
    detailSection.scrollTop = 0;
}

// ===== ê´€ê´‘ì§€ ë¦¬ìŠ¤íŠ¸ ë¡œë“œ =====
async function loadAttractions(festival) {
    const container = document.getElementById('attractionsList');
    container.innerHTML = '<div class="text-center"><i class="fas fa-spinner fa-spin fa-2x"></i></div>';
    
    const attractionsHTML = [];
    
    for (const attraction of festival.attractions) {
        // ê° ê´€ê´‘ì§€ ì´ë¯¸ì§€ ê°€ì ¸ì˜¤ê¸°
        const image = await fetchImageFromUnsplash(attraction.imageKeyword, 'small');
        
        attractionsHTML.push(`
            <div class="attraction-item">
                <img src="${image}" alt="${attraction.name}" class="attraction-image">
                <div class="attraction-content">
                    <h4>${attraction.name}</h4>
                    <p>${attraction.description}</p>
                    <div class="attraction-location">
                        <i class="fas fa-map-marker-alt"></i> ${attraction.location}
                        <span style="margin-left: 1rem; color: #667eea;">
                            <i class="fas fa-route"></i> ${attraction.course}
                        </span>
                    </div>
                </div>
            </div>
        `);
    }
    
    container.innerHTML = attractionsHTML.join('');
}

// ===== ê²½ë¹„ ì •ë³´ ë¡œë“œ =====
function loadBudgetInfo(festival) {
    const detailsContainer = document.getElementById('budgetDetails');
    const totalContainer = document.getElementById('budgetTotal');
    
    let budgetHTML = '';
    const labels = [];
    const amounts = [];
    
    for (const [key, item] of Object.entries(festival.budget)) {
        budgetHTML += `
            <div class="budget-item">
                <div class="budget-item-label">
                    <i class="fas ${item.icon}"></i>
                    ${item.label}
                </div>
                <div class="budget-item-value">â‚©${formatNumber(item.amount)}</div>
            </div>
        `;
        labels.push(item.label);
        amounts.push(item.amount);
    }
    
    detailsContainer.innerHTML = budgetHTML;
    totalContainer.textContent = `â‚©${formatNumber(festival.totalBudget)}`;
    
    // ì°¨íŠ¸ ìƒì„±
    createBudgetChart(labels, amounts);
}

// ===== ê²½ë¹„ ì°¨íŠ¸ ìƒì„± (Chart.js) =====
let budgetChartInstance = null;

function createBudgetChart(labels, data) {
    const ctx = document.getElementById('budgetChart');
    
    // ê¸°ì¡´ ì°¨íŠ¸ ì œê±°
    if (budgetChartInstance) {
        budgetChartInstance.destroy();
    }
    
    // ìƒ‰ìƒ íŒ”ë ˆíŠ¸
    const colors = [
        '#667eea',
        '#764ba2',
        '#f093fb',
        '#4facfe',
        '#43e97b',
        '#fa709a'
    ];
    
    budgetChartInstance = new Chart(ctx, {
        type: 'doughnut',
        data: {
            labels: labels,
            datasets: [{
                data: data,
                backgroundColor: colors,
                borderWidth: 2,
                borderColor: '#fff'
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: true,
            plugins: {
                legend: {
                    position: 'bottom',
                    labels: {
                        padding: 15,
                        font: {
                            size: 12,
                            family: "'Noto Sans KR', sans-serif"
                        }
                    }
                },
                tooltip: {
                    callbacks: {
                        label: function(context) {
                            let label = context.label || '';
                            if (label) {
                                label += ': ';
                            }
                            label += 'â‚©' + formatNumber(context.parsed);
                            
                            // í¼ì„¼íŠ¸ ê³„ì‚°
                            const total = context.dataset.data.reduce((a, b) => a + b, 0);
                            const percent = ((context.parsed / total) * 100).toFixed(1);
                            label += ` (${percent}%)`;
                            
                            return label;
                        }
                    }
                }
            }
        }
    });
}

// ===== ì—¬í–‰ íŒ ë¡œë“œ =====
function loadTravelTips(festival) {
    const tipsContainer = document.getElementById('tipsContent');
    const prepContainer = document.getElementById('preparationContent');
    
    // ì—¬í–‰ íŒ
    let tipsHTML = '<ul>';
    festival.tips.forEach(tip => {
        tipsHTML += `<li><i class="fas fa-check-circle" style="color: #43e97b; margin-right: 0.5rem;"></i>${tip}</li>`;
    });
    tipsHTML += '</ul>';
    tipsContainer.innerHTML = tipsHTML;
    
    // ì¤€ë¹„ë¬¼
    let prepHTML = '<ul>';
    festival.preparation.forEach(item => {
        prepHTML += `<li><i class="fas fa-box" style="color: #667eea; margin-right: 0.5rem;"></i>${item}</li>`;
    });
    prepHTML += '</ul>';
    prepContainer.innerHTML = prepHTML;
}

// ===== ìƒì„¸ ì •ë³´ ë‹«ê¸° =====
function closeDetail() {
    const detailSection = document.getElementById('festivalDetail');
    detailSection.style.display = 'none';
    document.body.style.overflow = 'auto'; // ìŠ¤í¬ë¡¤ ë³µì›
}

// ===== ë¶€ë“œëŸ¬ìš´ ìŠ¤í¬ë¡¤ ì„¤ì • =====
function setupSmoothScroll() {
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();
            const target = document.querySelector(this.getAttribute('href'));
            if (target) {
                target.scrollIntoView({
                    behavior: 'smooth',
                    block: 'start'
                });
            }
        });
    });
}

// ===== ìŠ¤í¬ë¡¤ ì• ë‹ˆë©”ì´ì…˜ ì„¤ì • =====
function setupAnimations() {
    const observerOptions = {
        threshold: 0.1,
        rootMargin: '0px 0px -100px 0px'
    };
    
    const observer = new IntersectionObserver(function(entries) {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.style.animation = 'fadeInUp 0.6s ease forwards';
                observer.unobserve(entry.target);
            }
        });
    }, observerOptions);
    
    // ê´€ì°°í•  ìš”ì†Œë“¤
    document.querySelectorAll('.festival-card, .accordion-item').forEach(el => {
        observer.observe(el);
    });
}

// ===== ESC í‚¤ë¡œ ìƒì„¸ ì •ë³´ ë‹«ê¸° =====
document.addEventListener('keydown', function(e) {
    if (e.key === 'Escape') {
        closeDetail();
    }
});

// ===== ìƒì„¸ ì •ë³´ ë°°ê²½ í´ë¦­ ì‹œ ë‹«ê¸° =====
document.getElementById('festivalDetail')?.addEventListener('click', function(e) {
    if (e.target === this) {
        closeDetail();
    }
});

// ===== ì´ë¯¸ì§€ ë¡œë”© ì—ëŸ¬ ì²˜ë¦¬ =====
document.addEventListener('error', function(e) {
    if (e.target.tagName === 'IMG') {
        e.target.src = 'https://via.placeholder.com/800x600/667eea/ffffff?text=Image+Not+Available';
    }
}, true);

// ===== ì½˜ì†” í™˜ì˜ ë©”ì‹œì§€ =====
console.log('%cğŸ‰ Festival Travel Guide', 'color: #667eea; font-size: 24px; font-weight: bold;');
console.log('%cUnsplash APIë¥¼ ì‚¬ìš©í•˜ë ¤ë©´ script.js íŒŒì¼ì˜ UNSPLASH_ACCESS_KEYë¥¼ ì„¤ì •í•˜ì„¸ìš”.', 'color: #666; font-size: 14px;');
console.log('%chttps://unsplash.com/developers ì—ì„œ ë¬´ë£Œë¡œ ë°œê¸‰ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.', 'color: #666; font-size: 14px;');

// íŒ¨í‚¤ì§€ ì •ë³´ í‘œì‹œ
function displayPackageInfo(packageDetails) {
    // í¬í•¨ ì‚¬í•­
    const includedList = document.getElementById('packageIncluded');
    includedList.innerHTML = packageDetails.included.map(item => 
        `<li><i class="fas fa-check text-success"></i> ${item}</li>`
    ).join('');
    
    // ë¶ˆí¬í•¨ ì‚¬í•­
    const excludedList = document.getElementById('packageExcluded');
    excludedList.innerHTML = packageDetails.excluded.map(item => 
        `<li><i class="fas fa-times text-danger"></i> ${item}</li>`
    ).join('');
    
    // ì¶œë°œ ì¼ì •
    const datesList = document.getElementById('packageDates');
    datesList.innerHTML = packageDetails.departureDates.map(date => 
        `<li><i class="fas fa-plane-departure text-info"></i> ${date}</li>`
    ).join('');
    
    // ë‹¨ì²´ í• ì¸
    const discountDiv = document.getElementById('packageDiscount');
    discountDiv.innerHTML = Object.entries(packageDetails.groupDiscount).map(([people, discount]) => 
        `<div class="discount-item">
            <span class="badge bg-warning text-dark">${people}</span> 
            <span class="text-success fw-bold">${discount}</span>
        </div>`
    ).join('');
    
    // ìƒí’ˆ ì½”ë“œ
    document.getElementById('packageCode').textContent = packageDetails.productCode;
}

